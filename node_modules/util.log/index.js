'use strict';
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const path = require("path");
const sprintf_js_1 = require("sprintf-js");
const util_join_1 = require("util.join");
const util_timestamp_1 = require("util.timestamp");
const uuid = require("uuid");
const chalk = require('chalk');
const instances = new Map();
var Level;
(function (Level) {
    Level[Level["DEBUG"] = 0] = "DEBUG";
    Level[Level["INFO"] = 1] = "INFO";
    Level[Level["WARN"] = 2] = "WARN";
    Level[Level["ERROR"] = 3] = "ERROR";
    Level[Level["EVENT"] = 4] = "EVENT";
})(Level || (Level = {}));
class Logger {
    constructor() {
        this._messageFile = null;
        this._eventFile = null;
        this._config = null;
    }
    static instance(config) {
        config = Object.assign({
            colors: true,
            dateFormat: '%Y-%m-%d @ %H:%M:%S:%L',
            debug: false,
            directory: './logs',
            enabled: true,
            eventFile: 'events.log',
            messageFile: 'messages.log',
            namespace: 'default',
            nsWidth: 15,
            toConsole: false
        }, config);
        if (config.namespace == null) {
            config.namespace = uuid.v4();
        }
        let inst = instances.get(config.namespace);
        if (inst == null) {
            inst = new Logger();
            instances.set(config.namespace, inst);
        }
        inst.configure(config);
        return inst;
    }
    get config() {
        return this._config;
    }
    set config(val) {
        this._config = val;
    }
    get namespace() {
        return this._config.namespace;
    }
    toString() {
        const a = [
            JSON.stringify(this.config, null, 4),
            '\ninstances:'
        ].concat([...instances.keys()].map(it => ` - ${it}`), '');
        return a.join('\n');
    }
    debug(str, filename, self = this) {
        if (self.config.debug) {
            return self.message(str, Level.DEBUG, filename);
        }
        return '';
    }
    error(str, filename, self = this) {
        return self.message(str, Level.ERROR, filename);
    }
    event(str, id, filename, self = this) {
        if (id != null) {
            if (self.config.colors) {
                str = `${chalk.white.bgBlue(id)} => ${str}`;
            }
            else {
                str = `${id} => ${str}`;
            }
        }
        return self.message(str, Level.EVENT, filename);
    }
    info(str, filename, self = this) {
        return self.message(str, Level.INFO, filename);
    }
    warn(str, filename, self = this) {
        return self.warning(str, filename);
    }
    warning(str, filename, self = this) {
        return self.message(str, Level.WARN, filename);
    }
    /**
     * Allows the user to override the default configuration for the simple logger.
     * See the ILoggingConfig interface for valid options.
     * @param config {ILoggingConfig} optional argumets to override the default logger
     * @param self {Logger} a reference to the objects this pointer renamed to self.
     */
    configure(config, self = this) {
        self.config = config;
        if (self.config.colors) {
            chalk.enabled = true;
        }
        if (!fs.existsSync(self.config.directory)) {
            fs.mkdirSync(self.config.directory);
        }
        if (self.config.messageFile != null) {
            self._messageFile = util_join_1.join(self.config.directory, self.config.messageFile);
            if (!fs.existsSync(self._messageFile)) {
                fs.writeFileSync(self._messageFile, '');
            }
        }
        if (self.config.eventFile != null) {
            self._eventFile = util_join_1.join(self.config.directory, self.config.eventFile);
            if (!fs.existsSync(self._eventFile)) {
                fs.writeFileSync(self._eventFile, '');
            }
        }
    }
    /**
     * Internal function that takes the details of a message and formats the logging
     * output that will be sent to the log and/or the console.  It uses the format:
     *
     *     [LEVEL] @ {timestamp}: {message}
     *
     * This function checks to see if the enviornment has been configured.  If it has
     * not, then it uses the default options.
     *
     * @param str {string} the string passed to output functions.
     * @param level {Levels} the logging level requested.
     * @param filename {string} the name of the module where the message originated
     * @returns {str} the message that was written/displayed
     */
    message(str, level, filename = '', self = this) {
        if (!self.config.enabled) {
            return '';
        }
        const nsWidth = self.config.nsWidth;
        let timestamp = util_timestamp_1.timestamp({ dateFormat: self.config.dateFormat });
        let levelStr = String(level);
        let namespace = sprintf_js_1.sprintf(`%' -${nsWidth}s`, self.config.namespace.trim().substr(0, nsWidth));
        switch (level) {
            case Level.DEBUG:
                levelStr = (self.config.colors) ? chalk.gray('DEBUG') : 'DEBUG';
                break;
            case Level.INFO:
                levelStr = (self.config.colors) ? chalk.green('INFO ') : 'INFO ';
                break;
            case Level.WARN:
                levelStr = (self.config.colors) ? chalk.yellow('WARN ') : 'WARN ';
                break;
            case Level.ERROR:
                levelStr = (self.config.colors) ? chalk.red('ERROR') : 'ERROR';
                break;
            case Level.EVENT:
                levelStr = (self.config.colors) ? chalk.blue('EVENT') : 'EVENT';
                break;
        }
        if (filename !== '' && filename != null) {
            filename = `\{${path.basename(filename)}\}`;
        }
        if (self.config.colors) {
            timestamp = chalk.cyan(timestamp);
            namespace = chalk.magenta(namespace);
            filename = chalk.underline(filename);
        }
        const msg = `[${levelStr}] ${timestamp} [${namespace}] ~> ${str} ${filename}`;
        try {
            if (level === Level.EVENT && self._eventFile != null && fs.existsSync(self._eventFile)) {
                fs.appendFileSync(self._eventFile, msg + '\n');
            }
            if (self._messageFile != null && fs.existsSync(self._messageFile)) {
                fs.appendFileSync(self._messageFile, msg + '\n');
            }
            if (self.config.toConsole) {
                if (level === Level.ERROR) {
                    console.error(msg);
                }
                else {
                    console.log(msg);
                }
            }
        }
        catch (err) {
            console.warn(`log output no longer available: ${err}`);
        }
        return msg;
    }
}
exports.Logger = Logger;
exports.default = Logger;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7O0FBRWIsK0JBQStCO0FBQy9CLDZCQUE2QjtBQUM3QiwyQ0FBbUM7QUFDbkMseUNBQStCO0FBQy9CLG1EQUErQztBQUMvQyw2QkFBNkI7QUFFN0IsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBRS9CLE1BQU0sU0FBUyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFFNUIsSUFBSyxLQU1KO0FBTkQsV0FBSyxLQUFLO0lBQ1QsbUNBQUssQ0FBQTtJQUNMLGlDQUFJLENBQUE7SUFDSixpQ0FBSSxDQUFBO0lBQ0osbUNBQUssQ0FBQTtJQUNMLG1DQUFLLENBQUE7QUFDTixDQUFDLEVBTkksS0FBSyxLQUFMLEtBQUssUUFNVDtBQWVEO0lBa0NDO1FBSlEsaUJBQVksR0FBVyxJQUFJLENBQUM7UUFDNUIsZUFBVSxHQUFXLElBQUksQ0FBQztRQUMxQixZQUFPLEdBQW1CLElBQUksQ0FBQztJQUd2QyxDQUFDO0lBakNNLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBdUI7UUFDN0MsTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDdEIsTUFBTSxFQUFFLElBQUk7WUFDWixVQUFVLEVBQUUsd0JBQXdCO1lBQ3BDLEtBQUssRUFBRSxLQUFLO1lBQ1osU0FBUyxFQUFFLFFBQVE7WUFDbkIsT0FBTyxFQUFFLElBQUk7WUFDYixTQUFTLEVBQUUsWUFBWTtZQUN2QixXQUFXLEVBQUUsY0FBYztZQUMzQixTQUFTLEVBQUUsU0FBUztZQUNwQixPQUFPLEVBQUUsRUFBRTtZQUNYLFNBQVMsRUFBRSxLQUFLO1NBQ2hCLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFFWCxJQUFJLE1BQU0sQ0FBQyxTQUFTLElBQUksSUFBSSxFQUFFO1lBQzdCLE1BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEVB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